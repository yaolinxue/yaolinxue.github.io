import{_ as a,o as e,c as i,a6 as t}from"./chunks/framework.BkI9ovSD.js";const k=JSON.parse('{"title":"K8S No space left异常","description":"","frontmatter":{"date":"2024-12-19T00:00:00.000Z","tags":["kubernetes"],"categories":["kubernetes"]},"headers":[],"relativePath":"blog/kubernetes/k8s no space left.md","filePath":"blog/kubernetes/k8s no space left.md","lastUpdated":1746603753000}'),l={name:"blog/kubernetes/k8s no space left.md"};function n(p,s,h,o,c,r){return e(),i("div",{"data-pagefind-body":!0},s[0]||(s[0]=[t(`<h1 id="k8s-no-space-left异常" tabindex="-1">K8S No space left异常 <a class="header-anchor" href="#k8s-no-space-left异常" aria-label="Permalink to &quot;K8S No space left异常&quot;">​</a></h1><p>k8s 集群中，pod 创建失败，提示 No space left on device.</p><p>看你有几种原因:</p><ul><li>磁盘空间不足: df -h</li><li>docker磁盘不足: docker system df</li><li>linux watch文件异常: cat /proc/sys/fs/inotify/max_user_watches</li></ul><h2 id="磁盘空间不足" tabindex="-1">磁盘空间不足 <a class="header-anchor" href="#磁盘空间不足" aria-label="Permalink to &quot;磁盘空间不足&quot;">​</a></h2><p>磁盘空间不足，可以先检查一下磁盘是否已经满了，或者先清理一下磁盘。</p><h2 id="docker磁盘不足" tabindex="-1">docker磁盘不足 <a class="header-anchor" href="#docker磁盘不足" aria-label="Permalink to &quot;docker磁盘不足&quot;">​</a></h2><p>docker磁盘不足，可以先检查一下docker磁盘是否已经满了，或者先清理一下docker磁盘。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prune</span></span></code></pre></div><h2 id="linux-watch文件异常" tabindex="-1">linux watch文件异常 <a class="header-anchor" href="#linux-watch文件异常" aria-label="Permalink to &quot;linux watch文件异常&quot;">​</a></h2><p>这次线上问题排查终于找到了，是linux的watch文件数不足导致异常导致的。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /proc/sys/fs/inotify/max_user_watches</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fs.inotify.max_user_watches=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">524288</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 生效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span></span></code></pre></div>`,12)]))}const u=a(l,[["render",n]]);export{k as __pageData,u as default};
